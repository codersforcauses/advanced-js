<html>

<head>
  <title>Requestify</title>
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 -15 120 120%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’¬</text></svg>">
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <div class="container">
    <h1>Requestify</h1>
    <div class="flex">
      <p>Best requests in the west</p>
      <button onclick="getData();">Request data</button>
    </div>
    <div id='code-block'></div>
  </div>
  <div class="footer">Made with <3 by cfc</div>
</body>
<script type="text/javascript" src="renderjson.js"></script>
<script type='module'>
let code = document.querySelector('#code-block');
code.innerText = 'Welcome to Requestify';
renderjson.set_show_to_level(5).set_icons('+', '-')
// function for button
function getData() {
  const request = fetch('https://jsonplaceholder.typicode.com/users')
      .then(response => response.json())
      .then(json => {
        if (Object.keys(json).length === 0) throw { code: 500, message: 'Server error'};
        code.innerText = ''
        code.appendChild(renderjson(json))
      })
      .catch(err => {
        code.innerText = 'Error:'
        code.appendChild(renderjson(err))
      })
}
// need this declaration as type="module" is isolated from html
window.getData = getData;
</script>

</html>